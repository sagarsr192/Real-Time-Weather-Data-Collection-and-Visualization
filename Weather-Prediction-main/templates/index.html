<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Weather App</title>
  <link rel="icon" href="{{ url_for('static', filename='weather.png') }}">

  <!-- BOOTSTRAP -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- CHART JS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  <!-- FONT AWESOME -->
  <script src="https://kit.fontawesome.com/9df87047e7.js" crossorigin="anonymous"></script>

  <!-- GOOGLE FONT -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">

</head>


<body>

<!------------------ TOP SECTION ------------------->
<section id="sec-1" class="background-tint">

  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-dark">
      <a class="navbar-brand logo" href="/">
        <i class="fa-solid fa-cloud-showers-heavy fs-1"></i>
      </a>

      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#sec-1">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#sec-3">Current Weather</a></li>
          <li class="nav-item"><a class="nav-link" href="#sec-4">Weather Prediction</a></li>
          <li class="nav-item"><a class="nav-link" href="#sec-5">Irrigation</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Team</a></li>
        </ul>
      </div>
    </nav>
  </div>

  <div class="sec-1-content text-center">
    {% if predict_status %}
      <h1>Your Weather Data is Predicted ðŸŒ¦</h1>
      <a class="btn btn-primary" href="#sec-4">See Results</a>
    {% else %}
      <h1><b>ðŸŒ¾ Real-Time Weather Prediction for Irrigation </b></h1>
      <a class="btn btn-primary" href="#sec-3">Start</a>
    {% endif %}
  </div>

</section>


<!------------------ CURRENT WEATHER SECTION ------------------->
<section id="sec-3" class="background-tint-1">

  <div class="container py-5">
    <h1 class="text-center mb-4">Check Current Weather</h1>

    <form action="{{ url_for('home') }}" method="post" class="d-flex justify-content-center mb-4">
      <input type="text" name="city" class="form-control w-50" placeholder="Enter City Name">
      <button class="btn btn-primary ms-2">Check</button>
    </form>

    <div class="card p-4 shadow text-center">

      {% if status %}
        <h3>{{ city }} , {{ country }}</h3>
        <p><b>ðŸŒ¡ Temp:</b> {{ current_temp }}Â°C (Feels {{ feels_like }}Â°C)</p>
        <p><b>ðŸ“ˆ Max:</b> {{ temp_max }}Â°C | <b>ðŸ“‰ Min:</b> {{ temp_min }}Â°C</p>
        <p><b>ðŸ’§ Humidity:</b> {{ humidity }}%</p>
        <p><b>â›… Condition:</b> {{ description }}</p>

      {% else %}
        <h3>Enter a City to See Weather</h3>
      {% endif %}
    </div>
  </div>

</section>


<!------------------ WEATHER PREDICTION SECTION ------------------->
<section id="sec-4">

  <h1 class="text-center mb-3">Weather Prediction (Next 5 Hours)</h1>

  <form action="{{ url_for('prediction') }}" method="post" class="d-flex justify-content-center mb-4">
    <input type="text" name="city" class="form-control w-50" placeholder="Enter City Name">
    <button class="btn btn-success ms-2">Predict</button>
  </form>


  {% if predict_status %}

  <!------ PREDICTION TABLE ------>
  <div class="container">

    <table class="table table-bordered text-center shadow">
      <thead class="table-dark">
        <tr>
          <th>Time</th>
          <th>Temperature (Â°C)</th>
          <th>Humidity (%)</th>
        </tr>
      </thead>

      <tbody>
        <tr><td>After 1 hour</td><td>{{ temperature_1 }}</td><td>{{ humidity_1 }}</td></tr>
        <tr><td>After 2 hours</td><td>{{ temperature_2 }}</td><td>{{ humidity_2 }}</td></tr>
        <tr><td>After 3 hours</td><td>{{ temperature_3 }}</td><td>{{ humidity_3 }}</td></tr>
        <tr><td>After 4 hours</td><td>{{ temperature_4 }}</td><td>{{ humidity_4 }}</td></tr>
        <tr><td>After 5 hours</td><td>{{ temperature_5 }}</td><td>{{ humidity_5 }}</td></tr>
      </tbody>
    </table>
  </div>


  <!------ GRAPHS ------>
  <div class="container text-center">
    <canvas id="tempChart" width="700" height="350"></canvas>
    <canvas id="humChart" width="700" height="350"></canvas>
  </div>


  <!------ PERFORMANCE TABLE ------>
  <div class="container mt-4">

    <h2 class="text-center">ðŸ“Š Model Performance Matrix</h2>

    <table class="table table-hover table-bordered text-center shadow mt-3">
      <thead class="table-dark">
        <tr>
          <th>Metric</th>
          <th>Temperature</th>
          <th>Humidity</th>
        </tr>
      </thead>

      <tbody>
        <tr><td>MAE</td><td>{{ mae_temp }}</td><td>{{ mae_hum }}</td></tr>
        <tr><td>MSE</td><td>{{ mse_temp }}</td><td>{{ mse_hum }}</td></tr>
        <tr><td>RMSE</td><td>{{ rmse_temp }}</td><td>{{ rmse_hum }}</td></tr>
        <tr><td>MAPE (%)</td><td>{{ mape_temp }}%</td><td>{{ mape_hum }}%</td></tr>
      </tbody>
    </table>

    <div class="text-center">
      <a href="/download_excel" class="btn btn-success me-2">â¬‡ Download Excel</a>
      <a href="/download_pdf" class="btn btn-danger">â¬‡ Download PDF Report</a>
    </div>

  </div>


  <!------ IRRIGATION ADVICE ------>
  <div class="text-center mt-4">
    {% if humidity_1 >= 75 %}
      <h4>ðŸŒ§ Rain expected in **1 hour** â€“ DO NOT irrigate</h4>
    {% elif humidity_2 >= 75 %}
      <h4>ðŸŒ§ Rain expected in **2 hours** â€“ Avoid irrigation</h4>
    {% elif humidity_3 >= 75 %}
      <h4>ðŸŒ§ Rain expected in **3 hours** â€“ Plan irrigation wisely</h4>
    {% elif humidity_4 >= 75 %}
      <h4>ðŸŒ§ Rain expected in **4 hours** â€“ Delay watering</h4>
    {% elif humidity_5 >= 75 %}
      <h4>ðŸŒ§ Rain expected in **5 hours** â€“ Delay watering</h4>
    {% else %}
      <h4>â˜€ No rain expected â€“ Safe to irrigate</h4>
    {% endif %}
  </div>

  {% endif %}

</section>

<!-- ================= IRRIGATION SECTION ================= -->
<section id="sec-5" class="p-5 background-tint-2">

  <h1 class="text-center mb-4">ðŸšœ Irrigation Methods</h1>

  <div class="container">

    <div class="row mb-5">
      <div class="col-md-6">
        <img src="{{ url_for('static', filename='drip-system.jpg') }}" class="img-fluid rounded shadow">
      </div>
      <div class="col-md-6 d-flex flex-column justify-content-center">
        <h3>ðŸ’§ Drip Irrigation</h3>
        <p>Water flows drop-by-drop directly to roots. Saves water and increases efficiency.</p>
      </div>
    </div>

    <hr>

    <div class="row">
      <div class="col-md-6 d-flex flex-column justify-content-center">
        <h3>ðŸŒ§ Sprinkler Irrigation</h3>
        <p>Water sprayed like rain using pumps. Best for large farms & uneven fields.</p>
      </div>
      <div class="col-md-6">
        <img src="{{ url_for('static', filename='sprinkler-system.jpg') }}" class="img-fluid rounded shadow">
      </div>
    </div>

  </div>
</section>

<!-- ================= TEAM MEMBERS / CONTACT SECTION ================= -->
<section id="contact" style="background:black; padding:60px 0;">

  <h1 class="text-center text-white mb-5">Team Members</h1>

  <div class="container">

    <div class="row justify-content-center g-4">

      <!-- MEMBER 1 -->
      <div class="col-md-3 col-sm-6">
        <div class="card text-center p-3 shadow border-0" style="border-radius:18px;">
          
          <img src="{{ url_for('static', filename='sagar_img.jpeg') }}"
               class="rounded-circle mx-auto mb-3"
               style="width:120px;height:120px;object-fit:cover;">

          <h5 class="fw-bold">Sagar S R</h5>
          <p class="text-muted">Backend Developer</p>
          <a href="https://github.com/sagarsr192" class="fs-4 text-dark">
            <i class="fab fa-github"></i>
          </a>

        </div>
      </div>

      <!-- MEMBER 2 -->
      <div class="col-md-3 col-sm-6">
        <div class="card text-center p-3 shadow border-0" style="border-radius:18px;">
          
          <img src="{{ url_for('static', filename='Darshan_Gowda_GD.jpg') }}"
               class="rounded-circle mx-auto mb-3"
               style="width:120px;height:120px;object-fit:cover;">

          <h5 class="fw-bold">Darshan Gowda G D</h5>
          <p class="text-muted">Backend Developer</p>
          <a href="https://github.com/Darshangowda04" class="fs-4 text-dark">
            <i class="fab fa-github"></i>
          </a>

        </div>
      </div>

      <!-- MEMBER 3 -->
      <div class="col-md-3 col-sm-6">
        <div class="card text-center p-3 shadow border-0" style="border-radius:18px;">
          
          <img src="{{ url_for('static', filename='Anjaneya_Pakkirappa_Vaddar.jpg') }}"
               class="rounded-circle mx-auto mb-3"
               style="width:120px;height:120px;object-fit:cover;">

          <h5 class="fw-bold">Anjaneya P V</h5>
          <p class="text-muted">Frontend Developer</p>
          <a href="https://github.com/thewitanpav" class="fs-4 text-dark">
            <i class="fab fa-github"></i>
          </a>

        </div>
      </div>

      <!-- MEMBER 4 -->
      <div class="col-md-3 col-sm-6">
        <div class="card text-center p-3 shadow border-0" style="border-radius:18px;">
          
          <img src="{{ url_for('static', filename='KISHORE_M.jpeg') }}"
               class="rounded-circle mx-auto mb-3"
               style="width:120px;height:120px;object-fit:cover;">

          <h5 class="fw-bold">Kishore M</h5>
          <p class="text-muted">Frontend Developer</p>
          <a href="https://github.com/Kishorem2005" class="fs-4 text-dark">
            <i class="fab fa-github"></i>
          </a>

        </div>
      </div>

    </div>

    <p class="text-center text-white mt-4">
      Â© 2025 â€” Made by ATME AIML UNITED SQUAD ðŸ”¥
    </p>

  </div>
</section>




<!------------------ CHART JS SCRIPTS ------------------->


<script>

new Chart(document.getElementById("tempChart"), {
  type: "line",
  data: { labels: {{ tlabels | safe }},
  datasets: [{ label:"Temperature", data: {{ tvalues | safe }} }] }
});

new Chart(document.getElementById("humChart"), {
  type: "line",
  data: { labels: {{ hlabels | safe }},
  datasets: [{ label:"Humidity", data: {{ hvalues | safe }} }] }
});

</script>

</body>
</html>
